{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://e%3A/DevOps/Project/aCloudBridge_New/acloudbridge_webapp/src/app/account/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport React, { useState, useEffect, useRef } from 'react';\r\nimport Layout from '@/app/layout';\r\nimport { FaUser, FaLock } from 'react-icons/fa';\r\nimport { FaUserCircle } from 'react-icons/fa';\r\nimport { useRouter } from 'next/navigation';\r\n\r\ninterface User {\r\n    name: string;\r\n    email: string;\r\n    firstName?: string;\r\n    lastName?: string;\r\n}\r\n\r\nexport default function AccountPage() {\r\n    const [isDropdownOpen, setIsDropdownOpen] = useState(false);\r\n    const [user, setUser] = useState<User | null>(null);\r\n    const dropdownRef = useRef<HTMLDivElement>(null);\r\n    const router = useRouter();\r\n\r\n    const toggleDropdown = () => {\r\n        setIsDropdownOpen(!isDropdownOpen);\r\n    };\r\n\r\n    useEffect(() => {\r\n        async function fetchUserData() {\r\n            const token = localStorage.getItem('token');\r\n            console.log('Token:', token);\r\n            if (token) {\r\n                try {\r\n                    const response = await fetch('http://localhost:5000/user', {\r\n                        headers: {\r\n                            Authorization: `Bearer ${token}`,\r\n                        },\r\n                    });\r\n                    if (response.ok) {\r\n                        const userData = await response.json();\r\n                        console.log('User data:', userData);\r\n                        console.log('User Name:', userData.name);\r\n                        console.log('User First Name:', userData.firstName);\r\n                        console.log('User Last Name:', userData.lastName);\r\n\r\n                        if (userData.firstName && userData.lastName) {\r\n                            userData.name = `${userData.firstName} ${userData.lastName}`;\r\n                        }\r\n\r\n                        setUser(userData);\r\n                    } else {\r\n                        console.error('Failed to fetch user data');\r\n                    }\r\n                } catch (error) {\r\n                    console.error('Error fetching user data:', error);\r\n                }\r\n            }\r\n        }\r\n\r\n        fetchUserData();\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        function handleClickOutside(event: MouseEvent) {\r\n            if (dropdownRef.current && !dropdownRef.current.contains(event.target as Node)) {\r\n                setIsDropdownOpen(false);\r\n            }\r\n        }\r\n\r\n        document.addEventListener('mousedown', handleClickOutside);\r\n        return () => {\r\n            document.removeEventListener('mousedown', handleClickOutside);\r\n        };\r\n    }, [dropdownRef]);\r\n\r\n    const handleLogout = () => {\r\n        localStorage.removeItem('token');\r\n        router.push('/login');\r\n    };\r\n\r\n    const handleDeactivate = async () => {\r\n        if (window.confirm('Are you sure you want to deactivate your account?')) {\r\n            const token = localStorage.getItem('token');\r\n            if (token) {\r\n                try {\r\n                    const response = await fetch('http://localhost:5000/deactivate', {\r\n                        method: 'DELETE',\r\n                        headers: {\r\n                            Authorization: `Bearer ${token}`,\r\n                        },\r\n                    });\r\n\r\n                    if (response.ok) {\r\n                        localStorage.removeItem('token');\r\n                        router.push('/login');\r\n                        alert('Account deactivated successfully.');\r\n                    } else {\r\n                        alert('Failed to deactivate account.');\r\n                    }\r\n                } catch (error) {\r\n                    console.error('Error deactivating account:', error);\r\n                    alert('An error occurred while deactivating the account.');\r\n                }\r\n            }\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className=\"flex justify-end w-full mt-4\">\r\n            <div className=\"flex items-center space-x-6\">\r\n                <div className=\"flex items-center space-x-2\">\r\n                    <FaUser className=\"text-[#64FFDA] text-lg\" />\r\n                    <div className=\"relative\">\r\n                        <button \r\n                            className=\"text-[#64FFDA] font-semibold hover:bg-[#112240] px-4 py-2 rounded-full transition-colors duration-200\"\r\n                            onClick={toggleDropdown}\r\n                        >\r\n                            My Account\r\n                        </button>\r\n                        {isDropdownOpen && (\r\n                            <div\r\n                                ref={dropdownRef}\r\n                                className=\"absolute right-0 mt-2 w-60 bg-[#112240] rounded-md shadow-lg z-10 border border-[#64FFDA]\"\r\n                            >\r\n                                {user && (\r\n                                    <div className=\"p-4 border-b border-[#64FFDA] flex items-center\">\r\n                                        <FaUserCircle className=\"mr-2 text-5xl text-[#64FFDA]\" />\r\n                                        <div className=\"flex flex-col\">\r\n                                            <div className=\"font-semibold text-[#64FFDA]\">{user.name}</div>\r\n                                            <div className=\"text-sm text-gray-300\">{user.email}</div>\r\n                                        </div>\r\n                                    </div>\r\n                                )}\r\n                                <a \r\n                                    href=\"/profile\" \r\n                                    className=\"block px-4 py-2 text-sm text-[#64FFDA] hover:bg-[#0A192F] transition-colors duration-200\"\r\n                                >\r\n                                    Profile\r\n                                </a>\r\n                                <button\r\n                                    onClick={handleDeactivate}\r\n                                    className=\"block px-4 py-2 text-sm text-[#64FFDA] hover:bg-[#0A192F] w-full text-left transition-colors duration-200\"\r\n                                >\r\n                                    Deactivate Account\r\n                                </button>\r\n                                <a\r\n                                    href=\"/changepassword\"\r\n                                    className=\"block px-4 py-2 text-sm text-[#64FFDA] hover:bg-[#0A192F] transition-colors duration-200\"\r\n                                >\r\n                                    Change Password\r\n                                </a>\r\n                            </div>\r\n                        )}\r\n                    </div>\r\n                </div>\r\n                <div className=\"flex items-center space-x-2\">\r\n                    <FaLock className=\"text-[#64FFDA] text-lg\" />\r\n                    <button \r\n                        className=\"text-[#64FFDA] font-semibold hover:bg-[#112240] px-4 py-2 rounded-full transition-colors duration-200\"\r\n                        onClick={handleLogout}\r\n                    >\r\n                        Logout\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    );\r\n}"],"names":[],"mappings":"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","debugId":null}}]
}